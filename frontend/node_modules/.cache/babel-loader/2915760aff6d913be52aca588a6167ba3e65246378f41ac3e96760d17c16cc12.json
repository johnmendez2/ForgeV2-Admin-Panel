{"ast":null,"code":"var _jsxFileName = \"/Users/gk/Downloads/ForgeV2-Admin-Panel/frontend/src/components/AdminPanel.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useMemo } from 'react';\nimport './AdminPanel.css';\nimport FinancialsPanel from './FinancialsPanel';\nimport StatisticsPanel from './StatisticsPanel';\nimport TemplatesPanel from './TemplatesPanel';\nimport UserManagementPanel from './UserManagementPanel';\nimport WorkflowStatsPanel from './WorkflowStatsPanel';\nimport DownloadButton, { DownloadIcon } from './DownloadButton';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DEFAULT_BASES = () => {\n  const bases = [process.env.REACT_APP_API_BASE_URL, 'http://localhost:8000', 'http://127.0.0.1:8000', `${window.location.protocol}//${window.location.hostname}:8000`];\n  // If backend is served behind the same origin (reverse proxy), try relative\n  bases.push(`${window.location.origin}`);\n  return Array.from(new Set(bases.filter(Boolean)));\n};\n_c = DEFAULT_BASES;\nconst API_BASES = DEFAULT_BASES();\nconst TABLES = ['account', 'templates', 'session', 'subscription', 'user', 'user_stats', 'workflow', 'workspace', 'workspace_invitation'];\n\n// CSV utility\nconst toCSV = rows => {\n  if (!rows || !rows.length) return '';\n  const headers = Object.keys(rows[0]);\n  const escape = val => {\n    if (val == null) return '';\n    const s = String(val).replaceAll('\"', '\"\"');\n    return `\"${s}\"`;\n  };\n  return [headers.map(h => `\"${h}\"`).join(','), ...rows.map(r => headers.map(h => escape(r[h])).join(','))].join('\\n');\n};\nconst downloadCSV = (filename, rows) => {\n  const csv = toCSV(rows);\n  const blob = new Blob([csv], {\n    type: 'text/csv;charset=utf-8;'\n  });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = filename;\n  a.click();\n  URL.revokeObjectURL(url);\n};\nconst fetchJsonWithFallback = async path => {\n  let lastError = null;\n  for (const base of API_BASES) {\n    try {\n      const url = `${base}${path}`;\n      const res = await fetch(url);\n      if (!res.ok) {\n        const text = await res.text();\n        throw new Error(`${res.status} ${text}`);\n      }\n      console.log(`Fetched OK: ${url}`);\n      return await res.json();\n    } catch (err) {\n      lastError = err;\n      console.warn(`Fetch failed for ${path} on base`, base, err);\n    }\n  }\n  throw lastError || new Error('No API base succeeded');\n};\nconst fetchAllData = async () => {\n  const results = {};\n  await Promise.all(TABLES.map(async table => {\n    try {\n      console.log(`Fetching table: ${table}`);\n      const json = await fetchJsonWithFallback(`/data/${table}`);\n      results[table] = json.data || [];\n      console.log(`Successfully fetched ${table}:`, json.data ? json.data.length : 0, 'rows');\n    } catch (e) {\n      console.error(`Error fetching ${table}:`, e);\n      results[table] = [];\n    }\n  }));\n  console.log('All data fetched:', Object.keys(results), 'tables');\n  return results;\n};\nconst buildUserRows = data => {\n  const users = Array.isArray(data.user) ? data.user : [];\n  const stats = Array.isArray(data.user_stats) ? data.user_stats : [];\n  const subs = Array.isArray(data.subscription) ? data.subscription : [];\n  const statsByUser = Object.fromEntries(stats.map(s => [s.user_id, s]));\n  const subByUser = Object.fromEntries(subs.map(s => [s.reference_id, s]));\n  return users.map(u => ({\n    user: u,\n    stats: statsByUser[u.id] || {},\n    subscription: subByUser[u.id] || {}\n  }));\n};\nconst aggregateStats = (arr = []) => arr.reduce((acc, s) => {\n  if (!s) return acc;\n  acc.total_manual_executions += s.total_manual_executions || 0;\n  acc.total_api_calls += s.total_api_calls || 0;\n  acc.total_webhook_triggers += s.total_webhook_triggers || 0;\n  acc.total_scheduled_executions += s.total_scheduled_executions || 0;\n  acc.total_tokens_used += s.total_tokens_used || 0;\n  acc.total_chat_executions += s.total_chat_executions || 0;\n  acc.total_cost += s.total_cost || 0;\n  return acc;\n}, {\n  total_manual_executions: 0,\n  total_api_calls: 0,\n  total_webhook_triggers: 0,\n  total_scheduled_executions: 0,\n  total_tokens_used: 0,\n  total_chat_executions: 0,\n  total_cost: 0\n});\nconst countByPlan = (subs = [], plan) => subs.filter(s => s.plan === plan).length;\nconst filterByStatus = (subs = [], status) => subs.filter(s => s.status === status && s.stripe_customer_id);\nconst sections = [{\n  name: 'Workflow Stats',\n  key: 'workflow_stats'\n}, {\n  name: 'Financials',\n  key: 'financials'\n}, {\n  name: 'Statistics',\n  key: 'statistics'\n}, {\n  name: 'Templates',\n  key: 'templates_list'\n}, {\n  name: 'User Database',\n  key: 'user_management'\n}];\nexport default function AdminPanel() {\n  _s();\n  var _sections$find;\n  const [data, setData] = useState({});\n  const [userRows, setUserRows] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [currentSection, setCurrentSection] = useState('workflow_stats');\n  const [sortConfig, setSortConfig] = useState({\n    table: null,\n    key: null,\n    direction: null\n  });\n  useEffect(() => {\n    (async () => {\n      setLoading(true);\n      const d = await fetchAllData();\n      console.log('Fetched data:', d);\n      console.log('Workflow data:', d.workflow);\n      setData(d);\n      setUserRows(buildUserRows(d));\n      setLoading(false);\n    })();\n  }, []);\n\n  // Derived\n  const subscriptions = data.subscription || [];\n  const userStatsArray = data.user_stats || [];\n  const templates = data.templates || [];\n  const aggregated = aggregateStats(userStatsArray);\n  const proCount = countByPlan(subscriptions, 'pro');\n  const teamCount = countByPlan(subscriptions, 'team');\n  const estimatedRevenue = proCount * 20 + teamCount * 40;\n  const userById = Object.fromEntries((data.user || []).map(u => [u.id, u]));\n  const activeSubsRaw = filterByStatus(subscriptions, 'active');\n  const incompleteSubsRaw = filterByStatus(subscriptions, 'incomplete');\n  const activeEmails = new Set(activeSubsRaw.map(s => {\n    var _userById$s$reference;\n    return (_userById$s$reference = userById[s.reference_id]) === null || _userById$s$reference === void 0 ? void 0 : _userById$s$reference.email;\n  }).filter(Boolean));\n  const incompleteSubs = incompleteSubsRaw.filter(s => {\n    var _userById$s$reference2;\n    return !activeEmails.has((_userById$s$reference2 = userById[s.reference_id]) === null || _userById$s$reference2 === void 0 ? void 0 : _userById$s$reference2.email);\n  });\n\n  // CSV rows\n  const userManagementRows = userRows.map(({\n    user,\n    stats,\n    subscription\n  }) => ({\n    user_id: user.id,\n    name: user.name,\n    email: user.email,\n    email_verified: user.email_verified ? 'Yes' : 'No',\n    created_at: user.created_at,\n    plan: subscription.plan,\n    subscription_status: subscription.status,\n    total_api_calls: stats.total_api_calls,\n    total_cost: stats.total_cost,\n    total_manual_executions: stats.total_manual_executions,\n    total_webhook_triggers: stats.total_webhook_triggers,\n    total_scheduled_executions: stats.total_scheduled_executions,\n    total_tokens_used: stats.total_tokens_used,\n    total_chat_executions: stats.total_chat_executions,\n    current_usage_limit: stats.current_usage_limit,\n    usage_limit_updated_at: stats.usage_limit_updated_at,\n    current_period_cost: stats.current_period_cost,\n    last_period_cost: stats.last_period_cost,\n    last_active: stats.last_active,\n    seats: subscription.seats\n  }));\n  const allSubsRows = subscriptions.map(s => {\n    var _userById$s$reference3;\n    return {\n      subscription_id: s.id,\n      plan: s.plan,\n      status: s.status,\n      stripe_customer_id: s.stripe_customer_id,\n      stripe_subscription_id: s.stripe_subscription_id,\n      user_email: (_userById$s$reference3 = userById[s.reference_id]) === null || _userById$s$reference3 === void 0 ? void 0 : _userById$s$reference3.email,\n      period_start: s.period_start,\n      period_end: s.period_end,\n      cancel_at_period_end: s.cancel_at_period_end ? 'Yes' : 'No',\n      seats: s.seats\n    };\n  });\n  const activeSubsRows = activeSubsRaw.map(s => {\n    var _userById$s$reference4;\n    return {\n      ...s,\n      user_email: (_userById$s$reference4 = userById[s.reference_id]) === null || _userById$s$reference4 === void 0 ? void 0 : _userById$s$reference4.email\n    };\n  });\n  const incompleteSubsRows = incompleteSubs.map(s => {\n    var _userById$s$reference5;\n    return {\n      ...s,\n      user_email: (_userById$s$reference5 = userById[s.reference_id]) === null || _userById$s$reference5 === void 0 ? void 0 : _userById$s$reference5.email\n    };\n  });\n\n  // Sorting\n  const handleSort = (table, key) => setSortConfig(prev => {\n    if (prev.table !== table || prev.key !== key) return {\n      table,\n      key,\n      direction: 'asc'\n    };\n    if (prev.direction === 'asc') return {\n      table,\n      key,\n      direction: 'desc'\n    };\n    return {\n      table: null,\n      key: null,\n      direction: null\n    };\n  });\n  const sortIndicator = (table, key) => {\n    if (sortConfig.table === table && sortConfig.key === key) {\n      return sortConfig.direction === 'asc' ? ' ▲' : ' ▼';\n    }\n    return '';\n  };\n  const sortData = (arr, key, dir) => {\n    if (!key || !dir) return arr;\n    return [...arr].sort((a, b) => {\n      var _a$key, _b$key;\n      let av = (_a$key = a[key]) !== null && _a$key !== void 0 ? _a$key : '';\n      let bv = (_b$key = b[key]) !== null && _b$key !== void 0 ? _b$key : '';\n      const aN = parseFloat(av),\n        bN = parseFloat(bv);\n      const bothNum = !isNaN(aN) && !isNaN(bN);\n      let cmp = bothNum ? aN - bN : String(av).localeCompare(String(bv), undefined, {\n        numeric: true\n      });\n      if (cmp === 0) return 0;\n      return dir === 'asc' ? cmp < 0 ? -1 : 1 : cmp < 0 ? 1 : -1;\n    });\n  };\n  const sortedUserRows = useMemo(() => sortConfig.table === 'user_management' ? sortData(userManagementRows, sortConfig.key, sortConfig.direction).map(r => ({\n    user: {\n      id: r.user_id,\n      name: r.name,\n      email: r.email,\n      created_at: r.created_at,\n      email_verified: r.email_verified === 'Yes'\n    },\n    stats: r,\n    subscription: r\n  })) : userRows, [sortConfig, userRows]);\n  const sortedAllSubs = useMemo(() => sortConfig.table === 'all_subs' ? sortData(allSubsRows, sortConfig.key, sortConfig.direction) : allSubsRows, [sortConfig, allSubsRows]);\n  const sortedActiveSubsFinal = useMemo(() => sortConfig.table === 'active_subs' ? sortData(activeSubsRows, sortConfig.key, sortConfig.direction) : activeSubsRows, [sortConfig, activeSubsRows]);\n  const sortedIncompleteSubsFinal = useMemo(() => sortConfig.table === 'incomplete_subs' ? sortData(incompleteSubsRows, sortConfig.key, sortConfig.direction) : incompleteSubsRows, [sortConfig, incompleteSubsRows]);\n  const title = ((_sections$find = sections.find(s => s.key === currentSection)) === null || _sections$find === void 0 ? void 0 : _sections$find.name) || '';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n      className: \"sidebar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"brand\",\n        children: \"Forge v2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nav\",\n        children: sections.map(s => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `sidebar-item${currentSection === s.key ? ' active' : ''}`,\n          onClick: () => setCurrentSection(s.key),\n          children: s.name\n        }, s.key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"topbar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"content\",\n        children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading\",\n          children: \"Loading data\\u2026\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }, this) : currentSection === 'workflow_stats' ? (() => {\n          console.log('Rendering WorkflowStatsPanel with workflows:', data.workflow);\n          return /*#__PURE__*/_jsxDEV(WorkflowStatsPanel, {\n            workflows: data.workflow || []\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 22\n          }, this);\n        })() : currentSection === 'financials' ? /*#__PURE__*/_jsxDEV(FinancialsPanel, {\n          subscriptions: allSubsRows,\n          userById: userById,\n          aggregated: aggregated,\n          proCount: proCount,\n          teamCount: teamCount,\n          estimatedRevenue: estimatedRevenue,\n          handleSort: handleSort,\n          sortIndicator: sortIndicator,\n          sortedActiveSubs: sortedActiveSubsFinal,\n          sortedIncompleteSubs: sortedIncompleteSubsFinal,\n          onDownloadAll: () => downloadCSV('subscriptions.csv', allSubsRows),\n          onDownloadActive: () => downloadCSV('active_subscriptions.csv', activeSubsRows),\n          onDownloadIncomplete: () => downloadCSV('incomplete_subscriptions.csv', incompleteSubsRows)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 13\n        }, this) : currentSection === 'statistics' ? /*#__PURE__*/_jsxDEV(StatisticsPanel, {\n          data: data,\n          aggregated: aggregated\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this) : currentSection === 'templates_list' ? /*#__PURE__*/_jsxDEV(TemplatesPanel, {\n          templates: templates,\n          userById: userById\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(UserManagementPanel, {\n          sortedUserRows: sortedUserRows,\n          handleSort: handleSort,\n          sortIndicator: sortIndicator,\n          onDownloadUsers: () => downloadCSV('users.csv', userManagementRows)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 288,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminPanel, \"s2ZaC1KLOQVN5Eywip+q3cSQZ54=\");\n_c2 = AdminPanel;\nvar _c, _c2;\n$RefreshReg$(_c, \"DEFAULT_BASES\");\n$RefreshReg$(_c2, \"AdminPanel\");","map":{"version":3,"names":["React","useEffect","useState","useMemo","FinancialsPanel","StatisticsPanel","TemplatesPanel","UserManagementPanel","WorkflowStatsPanel","DownloadButton","DownloadIcon","jsxDEV","_jsxDEV","DEFAULT_BASES","bases","process","env","REACT_APP_API_BASE_URL","window","location","protocol","hostname","push","origin","Array","from","Set","filter","Boolean","_c","API_BASES","TABLES","toCSV","rows","length","headers","Object","keys","escape","val","s","String","replaceAll","map","h","join","r","downloadCSV","filename","csv","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","fetchJsonWithFallback","path","lastError","base","res","fetch","ok","text","Error","status","console","log","json","err","warn","fetchAllData","results","Promise","all","table","data","e","error","buildUserRows","users","isArray","user","stats","user_stats","subs","subscription","statsByUser","fromEntries","user_id","subByUser","reference_id","u","id","aggregateStats","arr","reduce","acc","total_manual_executions","total_api_calls","total_webhook_triggers","total_scheduled_executions","total_tokens_used","total_chat_executions","total_cost","countByPlan","plan","filterByStatus","stripe_customer_id","sections","name","key","AdminPanel","_s","_sections$find","setData","userRows","setUserRows","loading","setLoading","currentSection","setCurrentSection","sortConfig","setSortConfig","direction","d","workflow","subscriptions","userStatsArray","templates","aggregated","proCount","teamCount","estimatedRevenue","userById","activeSubsRaw","incompleteSubsRaw","activeEmails","_userById$s$reference","email","incompleteSubs","_userById$s$reference2","has","userManagementRows","email_verified","created_at","subscription_status","current_usage_limit","usage_limit_updated_at","current_period_cost","last_period_cost","last_active","seats","allSubsRows","_userById$s$reference3","subscription_id","stripe_subscription_id","user_email","period_start","period_end","cancel_at_period_end","activeSubsRows","_userById$s$reference4","incompleteSubsRows","_userById$s$reference5","handleSort","prev","sortIndicator","sortData","dir","sort","b","_a$key","_b$key","av","bv","aN","parseFloat","bN","bothNum","isNaN","cmp","localeCompare","undefined","numeric","sortedUserRows","sortedAllSubs","sortedActiveSubsFinal","sortedIncompleteSubsFinal","title","find","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","workflows","sortedActiveSubs","sortedIncompleteSubs","onDownloadAll","onDownloadActive","onDownloadIncomplete","onDownloadUsers","_c2","$RefreshReg$"],"sources":["/Users/gk/Downloads/ForgeV2-Admin-Panel/frontend/src/components/AdminPanel.jsx"],"sourcesContent":["import React, { useEffect, useState, useMemo } from 'react';\nimport './AdminPanel.css';\n\nimport FinancialsPanel from './FinancialsPanel';\nimport StatisticsPanel from './StatisticsPanel';\nimport TemplatesPanel from './TemplatesPanel';\nimport UserManagementPanel from './UserManagementPanel';\nimport WorkflowStatsPanel from './WorkflowStatsPanel';\nimport DownloadButton, { DownloadIcon } from './DownloadButton';\n\nconst DEFAULT_BASES = () => {\n  const bases = [\n    process.env.REACT_APP_API_BASE_URL,\n    'http://localhost:8000',\n    'http://127.0.0.1:8000',\n    `${window.location.protocol}//${window.location.hostname}:8000`,\n  ];\n  // If backend is served behind the same origin (reverse proxy), try relative\n  bases.push(`${window.location.origin}`);\n  return Array.from(new Set(bases.filter(Boolean)));\n};\n\nconst API_BASES = DEFAULT_BASES();\nconst TABLES = [\n  'account',\n  'templates',\n  'session',\n  'subscription',\n  'user',\n  'user_stats',\n  'workflow',\n  'workspace',\n  'workspace_invitation',\n];\n\n// CSV utility\nconst toCSV = (rows) => {\n  if (!rows || !rows.length) return '';\n  const headers = Object.keys(rows[0]);\n  const escape = (val) => {\n    if (val == null) return '';\n    const s = String(val).replaceAll('\"', '\"\"');\n    return `\"${s}\"`;\n  };\n  return [\n    headers.map((h) => `\"${h}\"`).join(','),\n    ...rows.map((r) => headers.map((h) => escape(r[h])).join(',')),\n  ].join('\\n');\n};\n\nconst downloadCSV = (filename, rows) => {\n  const csv = toCSV(rows);\n  const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = filename;\n  a.click();\n  URL.revokeObjectURL(url);\n};\n\nconst fetchJsonWithFallback = async (path) => {\n  let lastError = null;\n  for (const base of API_BASES) {\n    try {\n      const url = `${base}${path}`;\n      const res = await fetch(url);\n      if (!res.ok) {\n        const text = await res.text();\n        throw new Error(`${res.status} ${text}`);\n      }\n      console.log(`Fetched OK: ${url}`);\n      return await res.json();\n    } catch (err) {\n      lastError = err;\n      console.warn(`Fetch failed for ${path} on base`, base, err);\n    }\n  }\n  throw lastError || new Error('No API base succeeded');\n};\n\nconst fetchAllData = async () => {\n  const results = {};\n  await Promise.all(\n    TABLES.map(async (table) => {\n      try {\n        console.log(`Fetching table: ${table}`);\n        const json = await fetchJsonWithFallback(`/data/${table}`);\n        results[table] = json.data || [];\n        console.log(`Successfully fetched ${table}:`, json.data ? json.data.length : 0, 'rows');\n      } catch (e) {\n        console.error(`Error fetching ${table}:`, e);\n        results[table] = [];\n      }\n    })\n  );\n  console.log('All data fetched:', Object.keys(results), 'tables');\n  return results;\n};\n\nconst buildUserRows = (data) => {\n  const users = Array.isArray(data.user) ? data.user : [];\n  const stats = Array.isArray(data.user_stats) ? data.user_stats : [];\n  const subs  = Array.isArray(data.subscription) ? data.subscription : [];\n\n  const statsByUser = Object.fromEntries(stats.map((s) => [s.user_id, s]));\n  const subByUser   = Object.fromEntries(subs.map((s) => [s.reference_id, s]));\n\n  return users.map((u) => ({\n    user: u,\n    stats: statsByUser[u.id] || {},\n    subscription: subByUser[u.id] || {},\n  }));\n};\n\nconst aggregateStats = (arr = []) =>\n  arr.reduce(\n    (acc, s) => {\n      if (!s) return acc;\n      acc.total_manual_executions   += s.total_manual_executions   || 0;\n      acc.total_api_calls           += s.total_api_calls           || 0;\n      acc.total_webhook_triggers    += s.total_webhook_triggers    || 0;\n      acc.total_scheduled_executions+= s.total_scheduled_executions|| 0;\n      acc.total_tokens_used         += s.total_tokens_used         || 0;\n      acc.total_chat_executions     += s.total_chat_executions     || 0;\n      acc.total_cost                += s.total_cost                || 0;\n      return acc;\n    },\n    {\n      total_manual_executions: 0,\n      total_api_calls: 0,\n      total_webhook_triggers: 0,\n      total_scheduled_executions: 0,\n      total_tokens_used: 0,\n      total_chat_executions: 0,\n      total_cost: 0,\n    }\n  );\n\nconst countByPlan = (subs = [], plan) => subs.filter((s) => s.plan === plan).length;\nconst filterByStatus = (subs = [], status) => subs.filter((s) => s.status === status && s.stripe_customer_id);\n\nconst sections = [\n  { name: 'Workflow Stats',    key: 'workflow_stats'   },\n  { name: 'Financials',        key: 'financials'       },\n  { name: 'Statistics',        key: 'statistics'       },\n  { name: 'Templates',         key: 'templates_list'   },\n  { name: 'User Database',     key: 'user_management'  },\n];\n\nexport default function AdminPanel() {\n  const [data, setData]             = useState({});\n  const [userRows, setUserRows]     = useState([]);\n  const [loading, setLoading]       = useState(true);\n  const [currentSection, setCurrentSection] = useState('workflow_stats');\n  const [sortConfig, setSortConfig] = useState({ table: null, key: null, direction: null });\n\n  useEffect(() => {\n    (async () => {\n      setLoading(true);\n      const d = await fetchAllData();\n      console.log('Fetched data:', d);\n      console.log('Workflow data:', d.workflow);\n      setData(d);\n      setUserRows(buildUserRows(d));\n      setLoading(false);\n    })();\n  }, []);\n\n  // Derived\n  const subscriptions    = data.subscription || [];\n  const userStatsArray   = data.user_stats   || [];\n  const templates        = data.templates    || [];\n  const aggregated       = aggregateStats(userStatsArray);\n  const proCount         = countByPlan(subscriptions, 'pro');\n  const teamCount        = countByPlan(subscriptions, 'team');\n  const estimatedRevenue= proCount * 20 + teamCount * 40;\n  const userById         = Object.fromEntries((data.user||[]).map((u) => [u.id, u]));\n\n  const activeSubsRaw     = filterByStatus(subscriptions, 'active');\n  const incompleteSubsRaw = filterByStatus(subscriptions, 'incomplete');\n  const activeEmails      = new Set(activeSubsRaw.map((s) => userById[s.reference_id]?.email).filter(Boolean));\n  const incompleteSubs    = incompleteSubsRaw.filter((s) => !activeEmails.has(userById[s.reference_id]?.email));\n\n  // CSV rows\n  const userManagementRows = userRows.map(({ user, stats, subscription }) => ({\n    user_id: user.id,\n    name: user.name,\n    email: user.email,\n    email_verified: user.email_verified ? 'Yes' : 'No',\n    created_at: user.created_at,\n    plan: subscription.plan,\n    subscription_status: subscription.status,\n    total_api_calls: stats.total_api_calls,\n    total_cost: stats.total_cost,\n    total_manual_executions: stats.total_manual_executions,\n    total_webhook_triggers: stats.total_webhook_triggers,\n    total_scheduled_executions: stats.total_scheduled_executions,\n    total_tokens_used: stats.total_tokens_used,\n    total_chat_executions: stats.total_chat_executions,\n    current_usage_limit: stats.current_usage_limit,\n    usage_limit_updated_at: stats.usage_limit_updated_at,\n    current_period_cost: stats.current_period_cost,\n    last_period_cost: stats.last_period_cost,\n    last_active: stats.last_active,\n    seats: subscription.seats,\n  }));\n\n  const allSubsRows       = subscriptions.map((s) => ({\n    subscription_id: s.id,\n    plan: s.plan,\n    status: s.status,\n    stripe_customer_id: s.stripe_customer_id,\n    stripe_subscription_id: s.stripe_subscription_id,\n    user_email: userById[s.reference_id]?.email,\n    period_start: s.period_start,\n    period_end: s.period_end,\n    cancel_at_period_end: s.cancel_at_period_end ? 'Yes' : 'No',\n    seats: s.seats,\n  }));\n  const activeSubsRows     = activeSubsRaw.map((s) => ({ ...s, user_email: userById[s.reference_id]?.email }));\n  const incompleteSubsRows = incompleteSubs.map((s) => ({ ...s, user_email: userById[s.reference_id]?.email }));\n\n  // Sorting\n  const handleSort = (table, key) =>\n    setSortConfig((prev) => {\n      if (prev.table !== table || prev.key !== key) return { table, key, direction: 'asc' };\n      if (prev.direction === 'asc') return { table, key, direction: 'desc' };\n      return { table: null, key: null, direction: null };\n    });\n\n  const sortIndicator = (table, key) => {\n    if (sortConfig.table === table && sortConfig.key === key) {\n      return sortConfig.direction === 'asc' ? ' ▲' : ' ▼';\n    }\n    return '';\n  };\n\n  const sortData = (arr, key, dir) => {\n    if (!key || !dir) return arr;\n    return [...arr].sort((a, b) => {\n      let av = a[key] ?? '';\n      let bv = b[key] ?? '';\n      const aN = parseFloat(av), bN = parseFloat(bv);\n      const bothNum = !isNaN(aN) && !isNaN(bN);\n      let cmp = bothNum ? aN - bN : String(av).localeCompare(String(bv), undefined, { numeric: true });\n      if (cmp === 0) return 0;\n      return dir === 'asc' ? (cmp < 0 ? -1 : 1) : (cmp < 0 ? 1 : -1);\n    });\n  };\n\n  const sortedUserRows = useMemo(\n    () =>\n      sortConfig.table === 'user_management'\n        ? sortData(userManagementRows, sortConfig.key, sortConfig.direction).map((r) => ({\n            user: { id: r.user_id, name: r.name, email: r.email, created_at: r.created_at, email_verified: r.email_verified === 'Yes' },\n            stats: r,\n            subscription: r,\n          }))\n        : userRows,\n    [sortConfig, userRows]\n  );\n\n  const sortedAllSubs = useMemo(\n    () => (sortConfig.table === 'all_subs' ? sortData(allSubsRows, sortConfig.key, sortConfig.direction) : allSubsRows),\n    [sortConfig, allSubsRows]\n  );\n\n  const sortedActiveSubsFinal = useMemo(\n    () =>\n      sortConfig.table === 'active_subs'\n        ? sortData(activeSubsRows, sortConfig.key, sortConfig.direction)\n        : activeSubsRows,\n    [sortConfig, activeSubsRows]\n  );\n\n  const sortedIncompleteSubsFinal = useMemo(\n    () =>\n      sortConfig.table === 'incomplete_subs'\n        ? sortData(incompleteSubsRows, sortConfig.key, sortConfig.direction)\n        : incompleteSubsRows,\n    [sortConfig, incompleteSubsRows]\n  );\n\n  const title = sections.find((s) => s.key === currentSection)?.name || '';\n\n  return (\n    <div className=\"container\">\n      <aside className=\"sidebar\">\n        <div className=\"brand\">Forge v2</div>\n        <div className=\"nav\">\n          {sections.map((s) => (\n            <div\n              key={s.key}\n              className={`sidebar-item${currentSection === s.key ? ' active' : ''}`}\n              onClick={() => setCurrentSection(s.key)}\n            >\n              {s.name}\n            </div>\n          ))}\n        </div>\n      </aside>\n\n      <main className=\"main\">\n        <div className=\"topbar\">\n          <div className=\"title\">{title}</div>\n        </div>\n\n        <section className=\"content\">\n          {loading ? (\n            <div className=\"loading\">Loading data…</div>\n          ) : currentSection === 'workflow_stats' ? (\n            (() => {\n              console.log('Rendering WorkflowStatsPanel with workflows:', data.workflow);\n              return <WorkflowStatsPanel workflows={data.workflow || []} />;\n            })()\n          ) : currentSection === 'financials' ? (\n            <FinancialsPanel\n              subscriptions={allSubsRows}\n              userById={userById}\n              aggregated={aggregated}\n              proCount={proCount}\n              teamCount={teamCount}\n              estimatedRevenue={estimatedRevenue}\n              handleSort={handleSort}\n              sortIndicator={sortIndicator}\n              sortedActiveSubs={sortedActiveSubsFinal}\n              sortedIncompleteSubs={sortedIncompleteSubsFinal}\n              onDownloadAll={() => downloadCSV('subscriptions.csv', allSubsRows)}\n              onDownloadActive={() => downloadCSV('active_subscriptions.csv', activeSubsRows)}\n              onDownloadIncomplete={() => downloadCSV('incomplete_subscriptions.csv', incompleteSubsRows)}\n            />\n          ) : currentSection === 'statistics' ? (\n            <StatisticsPanel data={data} aggregated={aggregated} />\n          ) : currentSection === 'templates_list' ? (\n            <TemplatesPanel templates={templates} userById={userById} />\n          ) : (\n            <UserManagementPanel\n              sortedUserRows={sortedUserRows}\n              handleSort={handleSort}\n              sortIndicator={sortIndicator}\n              onDownloadUsers={() => downloadCSV('users.csv', userManagementRows)}\n            />\n          )}\n        </section>\n      </main>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}