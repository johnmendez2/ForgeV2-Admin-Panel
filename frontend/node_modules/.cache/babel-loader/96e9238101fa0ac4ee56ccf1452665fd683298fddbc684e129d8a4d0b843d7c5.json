{"ast":null,"code":"var _jsxFileName = \"/Users/gk/Downloads/ForgeV2-Admin-Panel/frontend/src/components/AdminPanel.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useMemo } from 'react';\nimport './AdminPanel.css';\nimport FinancialsPanel from './FinancialsPanel';\nimport StatisticsPanel from './StatisticsPanel';\nimport TemplatesPanel from './TemplatesPanel';\nimport UserManagementPanel from './UserManagementPanel';\nimport WorkflowStatsPanel from './WorkflowStatsPanel';\nimport DownloadButton, { DownloadIcon } from './DownloadButton';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BASE_URL = 'http://localhost:8000';\nconst TABLES = ['account', 'templates', 'session', 'subscription', 'user', 'user_stats', 'workflow', 'workspace', 'workspace_invitation'];\n\n// CSV utility\nconst toCSV = rows => {\n  if (!rows || !rows.length) return '';\n  const headers = Object.keys(rows[0]);\n  const escape = val => {\n    if (val == null) return '';\n    const s = String(val).replaceAll('\"', '\"\"');\n    return `\"${s}\"`;\n  };\n  return [headers.map(h => `\"${h}\"`).join(','), ...rows.map(r => headers.map(h => escape(r[h])).join(','))].join('\\n');\n};\nconst downloadCSV = (filename, rows) => {\n  const csv = toCSV(rows);\n  const blob = new Blob([csv], {\n    type: 'text/csv;charset=utf-8;'\n  });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = filename;\n  a.click();\n  URL.revokeObjectURL(url);\n};\nconst fetchAllData = async () => {\n  const results = {};\n  await Promise.all(TABLES.map(async table => {\n    try {\n      console.log(`Fetching table: ${table}`);\n      const json = await fetchJsonWithFallback(`/data/${table}`);\n      results[table] = json.data || [];\n      console.log(`Successfully fetched ${table}:`, json.data ? json.data.length : 0, 'rows');\n    } catch (e) {\n      console.error(`Error fetching ${table}:`, e);\n      results[table] = [];\n    }\n  }));\n  console.log('All data fetched:', Object.keys(results), 'tables');\n  return results;\n};\nconst buildUserRows = data => {\n  const users = Array.isArray(data.user) ? data.user : [];\n  const stats = Array.isArray(data.user_stats) ? data.user_stats : [];\n  const subs = Array.isArray(data.subscription) ? data.subscription : [];\n  const statsByUser = Object.fromEntries(stats.map(s => [s.user_id, s]));\n  const subByUser = Object.fromEntries(subs.map(s => [s.reference_id, s]));\n  return users.map(u => ({\n    user: u,\n    stats: statsByUser[u.id] || {},\n    subscription: subByUser[u.id] || {}\n  }));\n};\nconst aggregateStats = (arr = []) => arr.reduce((acc, s) => {\n  if (!s) return acc;\n  acc.total_manual_executions += s.total_manual_executions || 0;\n  acc.total_api_calls += s.total_api_calls || 0;\n  acc.total_webhook_triggers += s.total_webhook_triggers || 0;\n  acc.total_scheduled_executions += s.total_scheduled_executions || 0;\n  acc.total_tokens_used += s.total_tokens_used || 0;\n  acc.total_chat_executions += s.total_chat_executions || 0;\n  acc.total_cost += s.total_cost || 0;\n  return acc;\n}, {\n  total_manual_executions: 0,\n  total_api_calls: 0,\n  total_webhook_triggers: 0,\n  total_scheduled_executions: 0,\n  total_tokens_used: 0,\n  total_chat_executions: 0,\n  total_cost: 0\n});\nconst countByPlan = (subs = [], plan) => subs.filter(s => s.plan === plan).length;\nconst filterByStatus = (subs = [], status) => subs.filter(s => s.status === status && s.stripe_customer_id);\nconst sections = [{\n  name: 'Workflow Stats',\n  key: 'workflow_stats'\n}, {\n  name: 'Financials',\n  key: 'financials'\n}, {\n  name: 'Statistics',\n  key: 'statistics'\n}, {\n  name: 'Templates',\n  key: 'templates_list'\n}, {\n  name: 'User Database',\n  key: 'user_management'\n}];\nexport default function AdminPanel() {\n  _s();\n  var _sections$find;\n  const [data, setData] = useState({});\n  const [userRows, setUserRows] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [currentSection, setCurrentSection] = useState('workflow_stats');\n  const [sortConfig, setSortConfig] = useState({\n    table: null,\n    key: null,\n    direction: null\n  });\n  useEffect(() => {\n    (async () => {\n      setLoading(true);\n      const d = await fetchAllData();\n      console.log('Fetched data:', d);\n      console.log('Workflow data:', d.workflow);\n      setData(d);\n      setUserRows(buildUserRows(d));\n      setLoading(false);\n    })();\n  }, []);\n\n  // Derived\n  const subscriptions = data.subscription || [];\n  const userStatsArray = data.user_stats || [];\n  const templates = data.templates || [];\n  const aggregated = aggregateStats(userStatsArray);\n  const proCount = countByPlan(subscriptions, 'pro');\n  const teamCount = countByPlan(subscriptions, 'team');\n  const estimatedRevenue = proCount * 20 + teamCount * 40;\n  const userById = Object.fromEntries((data.user || []).map(u => [u.id, u]));\n  const activeSubsRaw = filterByStatus(subscriptions, 'active');\n  const incompleteSubsRaw = filterByStatus(subscriptions, 'incomplete');\n  const activeEmails = new Set(activeSubsRaw.map(s => {\n    var _userById$s$reference;\n    return (_userById$s$reference = userById[s.reference_id]) === null || _userById$s$reference === void 0 ? void 0 : _userById$s$reference.email;\n  }).filter(Boolean));\n  const incompleteSubs = incompleteSubsRaw.filter(s => {\n    var _userById$s$reference2;\n    return !activeEmails.has((_userById$s$reference2 = userById[s.reference_id]) === null || _userById$s$reference2 === void 0 ? void 0 : _userById$s$reference2.email);\n  });\n\n  // CSV rows\n  const userManagementRows = userRows.map(({\n    user,\n    stats,\n    subscription\n  }) => ({\n    user_id: user.id,\n    name: user.name,\n    email: user.email,\n    email_verified: user.email_verified ? 'Yes' : 'No',\n    created_at: user.created_at,\n    plan: subscription.plan,\n    subscription_status: subscription.status,\n    total_api_calls: stats.total_api_calls,\n    total_cost: stats.total_cost,\n    total_manual_executions: stats.total_manual_executions,\n    total_webhook_triggers: stats.total_webhook_triggers,\n    total_scheduled_executions: stats.total_scheduled_executions,\n    total_tokens_used: stats.total_tokens_used,\n    total_chat_executions: stats.total_chat_executions,\n    current_usage_limit: stats.current_usage_limit,\n    usage_limit_updated_at: stats.usage_limit_updated_at,\n    current_period_cost: stats.current_period_cost,\n    last_period_cost: stats.last_period_cost,\n    last_active: stats.last_active,\n    seats: subscription.seats\n  }));\n  const allSubsRows = subscriptions.map(s => {\n    var _userById$s$reference3;\n    return {\n      subscription_id: s.id,\n      plan: s.plan,\n      status: s.status,\n      stripe_customer_id: s.stripe_customer_id,\n      stripe_subscription_id: s.stripe_subscription_id,\n      user_email: (_userById$s$reference3 = userById[s.reference_id]) === null || _userById$s$reference3 === void 0 ? void 0 : _userById$s$reference3.email,\n      period_start: s.period_start,\n      period_end: s.period_end,\n      cancel_at_period_end: s.cancel_at_period_end ? 'Yes' : 'No',\n      seats: s.seats\n    };\n  });\n  const activeSubsRows = activeSubsRaw.map(s => {\n    var _userById$s$reference4;\n    return {\n      ...s,\n      user_email: (_userById$s$reference4 = userById[s.reference_id]) === null || _userById$s$reference4 === void 0 ? void 0 : _userById$s$reference4.email\n    };\n  });\n  const incompleteSubsRows = incompleteSubs.map(s => {\n    var _userById$s$reference5;\n    return {\n      ...s,\n      user_email: (_userById$s$reference5 = userById[s.reference_id]) === null || _userById$s$reference5 === void 0 ? void 0 : _userById$s$reference5.email\n    };\n  });\n\n  // Sorting\n  const handleSort = (table, key) => setSortConfig(prev => {\n    if (prev.table !== table || prev.key !== key) return {\n      table,\n      key,\n      direction: 'asc'\n    };\n    if (prev.direction === 'asc') return {\n      table,\n      key,\n      direction: 'desc'\n    };\n    return {\n      table: null,\n      key: null,\n      direction: null\n    };\n  });\n  const sortIndicator = (table, key) => {\n    if (sortConfig.table === table && sortConfig.key === key) {\n      return sortConfig.direction === 'asc' ? ' ▲' : ' ▼';\n    }\n    return '';\n  };\n  const sortData = (arr, key, dir) => {\n    if (!key || !dir) return arr;\n    return [...arr].sort((a, b) => {\n      var _a$key, _b$key;\n      let av = (_a$key = a[key]) !== null && _a$key !== void 0 ? _a$key : '';\n      let bv = (_b$key = b[key]) !== null && _b$key !== void 0 ? _b$key : '';\n      const aN = parseFloat(av),\n        bN = parseFloat(bv);\n      const bothNum = !isNaN(aN) && !isNaN(bN);\n      let cmp = bothNum ? aN - bN : String(av).localeCompare(String(bv), undefined, {\n        numeric: true\n      });\n      if (cmp === 0) return 0;\n      return dir === 'asc' ? cmp < 0 ? -1 : 1 : cmp < 0 ? 1 : -1;\n    });\n  };\n  const sortedUserRows = useMemo(() => sortConfig.table === 'user_management' ? sortData(userManagementRows, sortConfig.key, sortConfig.direction).map(r => ({\n    user: {\n      id: r.user_id,\n      name: r.name,\n      email: r.email,\n      created_at: r.created_at,\n      email_verified: r.email_verified === 'Yes'\n    },\n    stats: r,\n    subscription: r\n  })) : userRows, [sortConfig, userRows]);\n  const sortedAllSubs = useMemo(() => sortConfig.table === 'all_subs' ? sortData(allSubsRows, sortConfig.key, sortConfig.direction) : allSubsRows, [sortConfig, allSubsRows]);\n  const sortedActiveSubsFinal = useMemo(() => sortConfig.table === 'active_subs' ? sortData(activeSubsRows, sortConfig.key, sortConfig.direction) : activeSubsRows, [sortConfig, activeSubsRows]);\n  const sortedIncompleteSubsFinal = useMemo(() => sortConfig.table === 'incomplete_subs' ? sortData(incompleteSubsRows, sortConfig.key, sortConfig.direction) : incompleteSubsRows, [sortConfig, incompleteSubsRows]);\n  const title = ((_sections$find = sections.find(s => s.key === currentSection)) === null || _sections$find === void 0 ? void 0 : _sections$find.name) || '';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n      className: \"sidebar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"brand\",\n        children: \"Forge v2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nav\",\n        children: sections.map(s => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `sidebar-item${currentSection === s.key ? ' active' : ''}`,\n          onClick: () => setCurrentSection(s.key),\n          children: s.name\n        }, s.key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"topbar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"content\",\n        children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading\",\n          children: \"Loading data\\u2026\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this) : currentSection === 'workflow_stats' ? (() => {\n          console.log('Rendering WorkflowStatsPanel with workflows:', data.workflow);\n          return /*#__PURE__*/_jsxDEV(WorkflowStatsPanel, {\n            workflows: data.workflow || []\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 22\n          }, this);\n        })() : currentSection === 'financials' ? /*#__PURE__*/_jsxDEV(FinancialsPanel, {\n          subscriptions: allSubsRows,\n          userById: userById,\n          aggregated: aggregated,\n          proCount: proCount,\n          teamCount: teamCount,\n          estimatedRevenue: estimatedRevenue,\n          handleSort: handleSort,\n          sortIndicator: sortIndicator,\n          sortedActiveSubs: sortedActiveSubsFinal,\n          sortedIncompleteSubs: sortedIncompleteSubsFinal,\n          onDownloadAll: () => downloadCSV('subscriptions.csv', allSubsRows),\n          onDownloadActive: () => downloadCSV('active_subscriptions.csv', activeSubsRows),\n          onDownloadIncomplete: () => downloadCSV('incomplete_subscriptions.csv', incompleteSubsRows)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this) : currentSection === 'statistics' ? /*#__PURE__*/_jsxDEV(StatisticsPanel, {\n          data: data,\n          aggregated: aggregated\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 13\n        }, this) : currentSection === 'templates_list' ? /*#__PURE__*/_jsxDEV(TemplatesPanel, {\n          templates: templates,\n          userById: userById\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(UserManagementPanel, {\n          sortedUserRows: sortedUserRows,\n          handleSort: handleSort,\n          sortIndicator: sortIndicator,\n          onDownloadUsers: () => downloadCSV('users.csv', userManagementRows)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 256,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminPanel, \"s2ZaC1KLOQVN5Eywip+q3cSQZ54=\");\n_c = AdminPanel;\nvar _c;\n$RefreshReg$(_c, \"AdminPanel\");","map":{"version":3,"names":["React","useEffect","useState","useMemo","FinancialsPanel","StatisticsPanel","TemplatesPanel","UserManagementPanel","WorkflowStatsPanel","DownloadButton","DownloadIcon","jsxDEV","_jsxDEV","BASE_URL","TABLES","toCSV","rows","length","headers","Object","keys","escape","val","s","String","replaceAll","map","h","join","r","downloadCSV","filename","csv","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","fetchAllData","results","Promise","all","table","console","log","json","fetchJsonWithFallback","data","e","error","buildUserRows","users","Array","isArray","user","stats","user_stats","subs","subscription","statsByUser","fromEntries","user_id","subByUser","reference_id","u","id","aggregateStats","arr","reduce","acc","total_manual_executions","total_api_calls","total_webhook_triggers","total_scheduled_executions","total_tokens_used","total_chat_executions","total_cost","countByPlan","plan","filter","filterByStatus","status","stripe_customer_id","sections","name","key","AdminPanel","_s","_sections$find","setData","userRows","setUserRows","loading","setLoading","currentSection","setCurrentSection","sortConfig","setSortConfig","direction","d","workflow","subscriptions","userStatsArray","templates","aggregated","proCount","teamCount","estimatedRevenue","userById","activeSubsRaw","incompleteSubsRaw","activeEmails","Set","_userById$s$reference","email","Boolean","incompleteSubs","_userById$s$reference2","has","userManagementRows","email_verified","created_at","subscription_status","current_usage_limit","usage_limit_updated_at","current_period_cost","last_period_cost","last_active","seats","allSubsRows","_userById$s$reference3","subscription_id","stripe_subscription_id","user_email","period_start","period_end","cancel_at_period_end","activeSubsRows","_userById$s$reference4","incompleteSubsRows","_userById$s$reference5","handleSort","prev","sortIndicator","sortData","dir","sort","b","_a$key","_b$key","av","bv","aN","parseFloat","bN","bothNum","isNaN","cmp","localeCompare","undefined","numeric","sortedUserRows","sortedAllSubs","sortedActiveSubsFinal","sortedIncompleteSubsFinal","title","find","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","workflows","sortedActiveSubs","sortedIncompleteSubs","onDownloadAll","onDownloadActive","onDownloadIncomplete","onDownloadUsers","_c","$RefreshReg$"],"sources":["/Users/gk/Downloads/ForgeV2-Admin-Panel/frontend/src/components/AdminPanel.jsx"],"sourcesContent":["import React, { useEffect, useState, useMemo } from 'react';\nimport './AdminPanel.css';\n\nimport FinancialsPanel from './FinancialsPanel';\nimport StatisticsPanel from './StatisticsPanel';\nimport TemplatesPanel from './TemplatesPanel';\nimport UserManagementPanel from './UserManagementPanel';\nimport WorkflowStatsPanel from './WorkflowStatsPanel';\nimport DownloadButton, { DownloadIcon } from './DownloadButton';\n\nconst BASE_URL = 'http://localhost:8000';\nconst TABLES = [\n  'account',\n  'templates',\n  'session',\n  'subscription',\n  'user',\n  'user_stats',\n  'workflow',\n  'workspace',\n  'workspace_invitation',\n];\n\n// CSV utility\nconst toCSV = (rows) => {\n  if (!rows || !rows.length) return '';\n  const headers = Object.keys(rows[0]);\n  const escape = (val) => {\n    if (val == null) return '';\n    const s = String(val).replaceAll('\"', '\"\"');\n    return `\"${s}\"`;\n  };\n  return [\n    headers.map((h) => `\"${h}\"`).join(','),\n    ...rows.map((r) => headers.map((h) => escape(r[h])).join(',')),\n  ].join('\\n');\n};\n\nconst downloadCSV = (filename, rows) => {\n  const csv = toCSV(rows);\n  const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = filename;\n  a.click();\n  URL.revokeObjectURL(url);\n};\n\nconst fetchAllData = async () => {\n  const results = {};\n  await Promise.all(\n    TABLES.map(async (table) => {\n      try {\n        console.log(`Fetching table: ${table}`);\n        const json = await fetchJsonWithFallback(`/data/${table}`);\n        results[table] = json.data || [];\n        console.log(`Successfully fetched ${table}:`, json.data ? json.data.length : 0, 'rows');\n      } catch (e) {\n        console.error(`Error fetching ${table}:`, e);\n        results[table] = [];\n      }\n    })\n  );\n  console.log('All data fetched:', Object.keys(results), 'tables');\n  return results;\n};\n\nconst buildUserRows = (data) => {\n  const users = Array.isArray(data.user) ? data.user : [];\n  const stats = Array.isArray(data.user_stats) ? data.user_stats : [];\n  const subs  = Array.isArray(data.subscription) ? data.subscription : [];\n\n  const statsByUser = Object.fromEntries(stats.map((s) => [s.user_id, s]));\n  const subByUser   = Object.fromEntries(subs.map((s) => [s.reference_id, s]));\n\n  return users.map((u) => ({\n    user: u,\n    stats: statsByUser[u.id] || {},\n    subscription: subByUser[u.id] || {},\n  }));\n};\n\nconst aggregateStats = (arr = []) =>\n  arr.reduce(\n    (acc, s) => {\n      if (!s) return acc;\n      acc.total_manual_executions   += s.total_manual_executions   || 0;\n      acc.total_api_calls           += s.total_api_calls           || 0;\n      acc.total_webhook_triggers    += s.total_webhook_triggers    || 0;\n      acc.total_scheduled_executions+= s.total_scheduled_executions|| 0;\n      acc.total_tokens_used         += s.total_tokens_used         || 0;\n      acc.total_chat_executions     += s.total_chat_executions     || 0;\n      acc.total_cost                += s.total_cost                || 0;\n      return acc;\n    },\n    {\n      total_manual_executions: 0,\n      total_api_calls: 0,\n      total_webhook_triggers: 0,\n      total_scheduled_executions: 0,\n      total_tokens_used: 0,\n      total_chat_executions: 0,\n      total_cost: 0,\n    }\n  );\n\nconst countByPlan = (subs = [], plan) => subs.filter((s) => s.plan === plan).length;\nconst filterByStatus = (subs = [], status) => subs.filter((s) => s.status === status && s.stripe_customer_id);\n\nconst sections = [\n  { name: 'Workflow Stats',    key: 'workflow_stats'   },\n  { name: 'Financials',        key: 'financials'       },\n  { name: 'Statistics',        key: 'statistics'       },\n  { name: 'Templates',         key: 'templates_list'   },\n  { name: 'User Database',     key: 'user_management'  },\n];\n\nexport default function AdminPanel() {\n  const [data, setData]             = useState({});\n  const [userRows, setUserRows]     = useState([]);\n  const [loading, setLoading]       = useState(true);\n  const [currentSection, setCurrentSection] = useState('workflow_stats');\n  const [sortConfig, setSortConfig] = useState({ table: null, key: null, direction: null });\n\n  useEffect(() => {\n    (async () => {\n      setLoading(true);\n      const d = await fetchAllData();\n      console.log('Fetched data:', d);\n      console.log('Workflow data:', d.workflow);\n      setData(d);\n      setUserRows(buildUserRows(d));\n      setLoading(false);\n    })();\n  }, []);\n\n  // Derived\n  const subscriptions    = data.subscription || [];\n  const userStatsArray   = data.user_stats   || [];\n  const templates        = data.templates    || [];\n  const aggregated       = aggregateStats(userStatsArray);\n  const proCount         = countByPlan(subscriptions, 'pro');\n  const teamCount        = countByPlan(subscriptions, 'team');\n  const estimatedRevenue= proCount * 20 + teamCount * 40;\n  const userById         = Object.fromEntries((data.user||[]).map((u) => [u.id, u]));\n\n  const activeSubsRaw     = filterByStatus(subscriptions, 'active');\n  const incompleteSubsRaw = filterByStatus(subscriptions, 'incomplete');\n  const activeEmails      = new Set(activeSubsRaw.map((s) => userById[s.reference_id]?.email).filter(Boolean));\n  const incompleteSubs    = incompleteSubsRaw.filter((s) => !activeEmails.has(userById[s.reference_id]?.email));\n\n  // CSV rows\n  const userManagementRows = userRows.map(({ user, stats, subscription }) => ({\n    user_id: user.id,\n    name: user.name,\n    email: user.email,\n    email_verified: user.email_verified ? 'Yes' : 'No',\n    created_at: user.created_at,\n    plan: subscription.plan,\n    subscription_status: subscription.status,\n    total_api_calls: stats.total_api_calls,\n    total_cost: stats.total_cost,\n    total_manual_executions: stats.total_manual_executions,\n    total_webhook_triggers: stats.total_webhook_triggers,\n    total_scheduled_executions: stats.total_scheduled_executions,\n    total_tokens_used: stats.total_tokens_used,\n    total_chat_executions: stats.total_chat_executions,\n    current_usage_limit: stats.current_usage_limit,\n    usage_limit_updated_at: stats.usage_limit_updated_at,\n    current_period_cost: stats.current_period_cost,\n    last_period_cost: stats.last_period_cost,\n    last_active: stats.last_active,\n    seats: subscription.seats,\n  }));\n\n  const allSubsRows       = subscriptions.map((s) => ({\n    subscription_id: s.id,\n    plan: s.plan,\n    status: s.status,\n    stripe_customer_id: s.stripe_customer_id,\n    stripe_subscription_id: s.stripe_subscription_id,\n    user_email: userById[s.reference_id]?.email,\n    period_start: s.period_start,\n    period_end: s.period_end,\n    cancel_at_period_end: s.cancel_at_period_end ? 'Yes' : 'No',\n    seats: s.seats,\n  }));\n  const activeSubsRows     = activeSubsRaw.map((s) => ({ ...s, user_email: userById[s.reference_id]?.email }));\n  const incompleteSubsRows = incompleteSubs.map((s) => ({ ...s, user_email: userById[s.reference_id]?.email }));\n\n  // Sorting\n  const handleSort = (table, key) =>\n    setSortConfig((prev) => {\n      if (prev.table !== table || prev.key !== key) return { table, key, direction: 'asc' };\n      if (prev.direction === 'asc') return { table, key, direction: 'desc' };\n      return { table: null, key: null, direction: null };\n    });\n\n  const sortIndicator = (table, key) => {\n    if (sortConfig.table === table && sortConfig.key === key) {\n      return sortConfig.direction === 'asc' ? ' ▲' : ' ▼';\n    }\n    return '';\n  };\n\n  const sortData = (arr, key, dir) => {\n    if (!key || !dir) return arr;\n    return [...arr].sort((a, b) => {\n      let av = a[key] ?? '';\n      let bv = b[key] ?? '';\n      const aN = parseFloat(av), bN = parseFloat(bv);\n      const bothNum = !isNaN(aN) && !isNaN(bN);\n      let cmp = bothNum ? aN - bN : String(av).localeCompare(String(bv), undefined, { numeric: true });\n      if (cmp === 0) return 0;\n      return dir === 'asc' ? (cmp < 0 ? -1 : 1) : (cmp < 0 ? 1 : -1);\n    });\n  };\n\n  const sortedUserRows = useMemo(\n    () =>\n      sortConfig.table === 'user_management'\n        ? sortData(userManagementRows, sortConfig.key, sortConfig.direction).map((r) => ({\n            user: { id: r.user_id, name: r.name, email: r.email, created_at: r.created_at, email_verified: r.email_verified === 'Yes' },\n            stats: r,\n            subscription: r,\n          }))\n        : userRows,\n    [sortConfig, userRows]\n  );\n\n  const sortedAllSubs = useMemo(\n    () => (sortConfig.table === 'all_subs' ? sortData(allSubsRows, sortConfig.key, sortConfig.direction) : allSubsRows),\n    [sortConfig, allSubsRows]\n  );\n\n  const sortedActiveSubsFinal = useMemo(\n    () =>\n      sortConfig.table === 'active_subs'\n        ? sortData(activeSubsRows, sortConfig.key, sortConfig.direction)\n        : activeSubsRows,\n    [sortConfig, activeSubsRows]\n  );\n\n  const sortedIncompleteSubsFinal = useMemo(\n    () =>\n      sortConfig.table === 'incomplete_subs'\n        ? sortData(incompleteSubsRows, sortConfig.key, sortConfig.direction)\n        : incompleteSubsRows,\n    [sortConfig, incompleteSubsRows]\n  );\n\n  const title = sections.find((s) => s.key === currentSection)?.name || '';\n\n  return (\n    <div className=\"container\">\n      <aside className=\"sidebar\">\n        <div className=\"brand\">Forge v2</div>\n        <div className=\"nav\">\n          {sections.map((s) => (\n            <div\n              key={s.key}\n              className={`sidebar-item${currentSection === s.key ? ' active' : ''}`}\n              onClick={() => setCurrentSection(s.key)}\n            >\n              {s.name}\n            </div>\n          ))}\n        </div>\n      </aside>\n\n      <main className=\"main\">\n        <div className=\"topbar\">\n          <div className=\"title\">{title}</div>\n        </div>\n\n        <section className=\"content\">\n          {loading ? (\n            <div className=\"loading\">Loading data…</div>\n          ) : currentSection === 'workflow_stats' ? (\n            (() => {\n              console.log('Rendering WorkflowStatsPanel with workflows:', data.workflow);\n              return <WorkflowStatsPanel workflows={data.workflow || []} />;\n            })()\n          ) : currentSection === 'financials' ? (\n            <FinancialsPanel\n              subscriptions={allSubsRows}\n              userById={userById}\n              aggregated={aggregated}\n              proCount={proCount}\n              teamCount={teamCount}\n              estimatedRevenue={estimatedRevenue}\n              handleSort={handleSort}\n              sortIndicator={sortIndicator}\n              sortedActiveSubs={sortedActiveSubsFinal}\n              sortedIncompleteSubs={sortedIncompleteSubsFinal}\n              onDownloadAll={() => downloadCSV('subscriptions.csv', allSubsRows)}\n              onDownloadActive={() => downloadCSV('active_subscriptions.csv', activeSubsRows)}\n              onDownloadIncomplete={() => downloadCSV('incomplete_subscriptions.csv', incompleteSubsRows)}\n            />\n          ) : currentSection === 'statistics' ? (\n            <StatisticsPanel data={data} aggregated={aggregated} />\n          ) : currentSection === 'templates_list' ? (\n            <TemplatesPanel templates={templates} userById={userById} />\n          ) : (\n            <UserManagementPanel\n              sortedUserRows={sortedUserRows}\n              handleSort={handleSort}\n              sortIndicator={sortIndicator}\n              onDownloadUsers={() => downloadCSV('users.csv', userManagementRows)}\n            />\n          )}\n        </section>\n      </main>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}